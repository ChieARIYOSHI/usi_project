{"ast":null,"code":"import _classCallCheck from\"/Users/qrec-pm/usi_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/qrec-pm/usi_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/qrec-pm/usi_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/qrec-pm/usi_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';// import { Form } from 'react-bootstrap';\nimport{Button,Form,FormGroup,Label,Input,FormFeedback,Spinner}from'reactstrap';import{Link,withRouter}from'react-router-dom';import{Formik}from'formik';import*as Yup from'yup';import firebase from'firebase';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SignUp=/*#__PURE__*/function(_React$Component){_inherits(SignUp,_React$Component);var _super=_createSuper(SignUp);function SignUp(){var _this;_classCallCheck(this,SignUp);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={loading:false//処理中にボタンにspinner表示する制御用\n};_this._isMounted=false;_this.handleOnSubmit=function(values){//spinner表示開始\nif(_this._isMounted)_this.setState({loading:true});//新規登録処理\nfirebase.auth().createUserWithEmailAndPassword(values.email,values.password).then(function(res){//正常終了時\n//spinner表示終了\nif(_this._isMounted)_this.setState({loading:false});//Homeに移動\n_this.props.history.push(\"/\");//history.pushを使うためwithRouterしている\n}).catch(function(error){//異常終了時\nif(_this._isMounted)_this.setState({loading:false});alert(error);});};_this.componentDidMount=function(){_this._isMounted=true;};_this.componentWillUnmount=function(){_this._isMounted=false;};return _this;}_createClass(SignUp,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mx-auto\",style:{width:400,background:'#eee',padding:20,marginTop:60},children:[/*#__PURE__*/_jsx(\"p\",{style:{textAlign:'center'},children:\"\\u65B0\\u898F\\u767B\\u9332\"}),/*#__PURE__*/_jsx(Formik,{initialValues:{email:'',password:'',tel:''},onSubmit:function onSubmit(values){return _this2.handleOnSubmit(values);},validationSchema:Yup.object().shape({email:Yup.string().email().required(),password:Yup.string().required(),tel:Yup.string().required()}),children:function children(_ref){var handleSubmit=_ref.handleSubmit,handleChange=_ref.handleChange,handleBlur=_ref.handleBlur,values=_ref.values,errors=_ref.errors,touched=_ref.touched;return/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{for:\"name\",children:\"Email\"}),/*#__PURE__*/_jsx(Input,{type:\"email\",name:\"email\",id:\"email\",value:values.email,onChange:handleChange,onBlur:handleBlur,invalid:touched.email&&errors.email?true:false}),/*#__PURE__*/_jsx(FormFeedback,{children:errors.email})]}),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{for:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(Input,{type:\"password\",name:\"password\",id:\"password\",value:values.password,onChange:handleChange,onBlur:handleBlur,invalid:touched.password&&errors.password?true:false}),/*#__PURE__*/_jsx(FormFeedback,{children:errors.password})]}),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{for:\"tel\",children:\"Tel\"}),/*#__PURE__*/_jsx(Input,{type:\"tel\",name:\"tel\",id:\"tel\",value:values.tel,onChange:handleChange,onBlur:handleBlur,invalid:touched.tel&&errors.tel?true:false}),/*#__PURE__*/_jsx(FormFeedback,{children:errors.tel})]}),/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center'},children:/*#__PURE__*/_jsxs(Button,{color:\"success\",type:\"submit\",disabled:_this2.state.loading,children:[/*#__PURE__*/_jsx(Spinner,{size:\"sm\",color:\"light\",style:{marginRight:5},hidden:!_this2.state.loading}),\"\\u65B0\\u898F\\u767B\\u9332\"]})})]});}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mx-auto\",style:{width:400,background:'#fff',padding:20},children:/*#__PURE__*/_jsx(Link,{to:\"/signin\",children:\"\\u30ED\\u30B0\\u30A4\\u30F3\\u306F\\u3053\\u3061\\u3089\\u3002\"})})]});}}]);return SignUp;}(React.Component);export default withRouter(SignUp);","map":{"version":3,"sources":["/Users/qrec-pm/usi_project/src/components/signup.js"],"names":["React","Button","Form","FormGroup","Label","Input","FormFeedback","Spinner","Link","withRouter","Formik","Yup","firebase","SignUp","state","loading","_isMounted","handleOnSubmit","values","setState","auth","createUserWithEmailAndPassword","email","password","then","res","props","history","push","catch","error","alert","componentDidMount","componentWillUnmount","width","background","padding","marginTop","textAlign","tel","object","shape","string","required","handleSubmit","handleChange","handleBlur","errors","touched","marginRight","Component"],"mappings":"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","sourcesContent":["import React from 'react';\n// import { Form } from 'react-bootstrap';\nimport { Button, Form, FormGroup, Label, Input, FormFeedback, Spinner } from 'reactstrap';\nimport { Link, withRouter } from 'react-router-dom'\nimport { Formik } from 'formik';\nimport * as Yup from 'yup';\nimport firebase from 'firebase';\n\nclass SignUp extends React.Component {\n\n    state = {\n        loading: false, //処理中にボタンにspinner表示する制御用\n    }\n\n    _isMounted = false;\n\n    //Submitされたら\n    handleOnSubmit = (values) => {\n        //spinner表示開始\n        if (this._isMounted) this.setState({ loading: true });\n        //新規登録処理\n        firebase.auth().createUserWithEmailAndPassword(values.email, values.password)\n            .then(res => {\n                //正常終了時\n                //spinner表示終了\n                if (this._isMounted) this.setState({ loading: false });\n                //Homeに移動\n                this.props.history.push(\"/\"); //history.pushを使うためwithRouterしている\n            })\n            .catch(error => {\n                //異常終了時\n                if (this._isMounted) this.setState({ loading: false });\n                alert(error);\n            });\n    }\n\n    componentDidMount = () => {\n        this._isMounted = true;\n    }\n\n    componentWillUnmount = () => {\n        this._isMounted = false;\n    }\n\n    render() {\n        return (\n            <div className=\"container\">\n                <div className=\"mx-auto\" style={{ width: 400, background: '#eee', padding: 20, marginTop: 60 }}>\n                    <p style={{ textAlign: 'center' }}>新規登録</p>\n                    <Formik\n                        initialValues={{ email: '', password: '', tel: '' }}\n                        onSubmit={(values) => this.handleOnSubmit(values)}\n                        validationSchema={Yup.object().shape({\n                            email: Yup.string().email().required(),\n                            password: Yup.string().required(),\n                            tel: Yup.string().required(),\n                        })}\n                    >\n                        {\n                            ({ handleSubmit, handleChange, handleBlur, values, errors, touched }) => (\n                                <Form onSubmit={handleSubmit}>\n                                    <FormGroup>\n                                        <Label for=\"name\">Email</Label>\n                                        <Input\n                                            type=\"email\"\n                                            name=\"email\"\n                                            id=\"email\"\n                                            value={values.email}\n                                            onChange={handleChange}\n                                            onBlur={handleBlur}\n                                            invalid={touched.email && errors.email ? true : false}\n                                        />\n                                        <FormFeedback>\n                                            {errors.email}\n                                        </FormFeedback>\n                                    </FormGroup>\n                                    <FormGroup>\n                                        <Label for=\"password\">Password</Label>\n                                        <Input\n                                            type=\"password\"\n                                            name=\"password\"\n                                            id=\"password\"\n                                            value={values.password}\n                                            onChange={handleChange}\n                                            onBlur={handleBlur}\n                                            invalid={touched.password && errors.password ? true : false}\n                                        />\n                                        <FormFeedback>\n                                            {errors.password}\n                                        </FormFeedback>\n                                    </FormGroup>\n                                    <FormGroup>\n                                        <Label for=\"tel\">Tel</Label>\n                                        <Input\n                                            type=\"tel\"\n                                            name=\"tel\"\n                                            id=\"tel\"\n                                            value={values.tel}\n                                            onChange={handleChange}\n                                            onBlur={handleBlur}\n                                            invalid={touched.tel && errors.tel ? true : false}\n                                        />\n                                        <FormFeedback>\n                                            {errors.tel}\n                                        </FormFeedback>\n                                    </FormGroup>\n                                    <div style={{ textAlign: 'center' }}>\n                                        <Button color=\"success\" type=\"submit\" disabled={this.state.loading}>\n                                            <Spinner size=\"sm\" color=\"light\" style={{ marginRight: 5 }} hidden={!this.state.loading} />\n                                            新規登録\n                                        </Button>\n                                    </div>\n                                </Form>\n                            )\n                        }\n                    </Formik>\n                </div>\n                <div className=\"mx-auto\" style={{ width: 400, background: '#fff', padding: 20 }}>\n                    <Link to=\"/signin\">ログインはこちら。</Link>\n                </div>\n\n            </div>\n        );\n    }\n}\n\nexport default withRouter(SignUp);"]},"metadata":{},"sourceType":"module"}